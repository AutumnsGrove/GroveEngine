# Grove Router Worker
# Proxies wildcard subdomain requests to groveengine Pages
#
# This worker catches all *.grove.place requests and forwards them
# to grove-lattice.pages.dev with the original host in X-Forwarded-Host.

name = "grove-router"
main = "src/index.ts"
compatibility_date = "2025-01-01"

# Route configuration - catch all wildcard subdomains
# More specific routes (auth.grove.place, etc.) should be configured
# in Cloudflare Dashboard HTTP Routes to take precedence
routes = [
  { pattern = "*.grove.place/*", zone_name = "grove.place" }
]

# R2 binding for CDN
[[r2_buckets]]
binding = "CDN"
bucket_name = "grove-cdn"
